# QuantAxis Multi-CTP Gateway - é¡¹ç›®çŠ¶æ€

## âœ… å®ŒæˆçŠ¶æ€

**é¡¹ç›®å·²æˆåŠŸè½¬æ¢ä¸ºå®Œå…¨ç‹¬ç«‹çš„å¯ç¼–è¯‘é¡¹ç›®ï¼**

### ğŸ¯ ä¸»è¦æˆå°±

1. **âœ… ç‹¬ç«‹ç¼–è¯‘ç³»ç»Ÿ**
   - æ‰€æœ‰ä¾èµ–é¡¹å·²å†…ç½®åˆ°é¡¹ç›®ä¸­
   - æ— éœ€å¤–éƒ¨ä¾èµ–ï¼Œå¯ç‹¬ç«‹ç¼–è¯‘
   - ç¼–è¯‘æˆåŠŸï¼š`bin/market_data_server` (31MB)

2. **âœ… å®Œæ•´ä¾èµ–é›†æˆ**
   - **RapidJSON**: å·²æ†ç»‘å¤´æ–‡ä»¶åˆ° `include/rapidjson/`
   - **open-trade-common**: å·²æ†ç»‘åˆ° `include/open-trade-common/`
   - **CTPåº“**: å·²åŒ…å« `libs/thostmduserapi_se.so` å’Œ `libs/thosttraderapi_se.so`

3. **âœ… Dockeræ”¯æŒå°±ç»ª**
   - DockerfileåŸºäºUbuntu 20.04
   - docker-compose.ymlåŒ…å«Redisé›†æˆ
   - docker-build.shè‡ªåŠ¨åŒ–æ„å»ºè„šæœ¬
   - å®Œæ•´çš„DEPLOYMENT.mdéƒ¨ç½²æŒ‡å—

4. **âœ… å¤šCTPæ¶æ„å®Œæ•´**
   - 90ä¸ªæœŸè´§å…¬å¸é…ç½®å®Œæ•´
   - æ”¯æŒ25,000+åˆçº¦è®¢é˜…
   - æ™ºèƒ½è´Ÿè½½å‡è¡¡å’Œæ•…éšœè½¬ç§»
   - WebSocketå®æ—¶æ•°æ®åˆ†å‘

### ğŸ“ é¡¹ç›®ç»“æ„

```
qactpmdgateway/
â”œâ”€â”€ src/                      # æºä»£ç  (C++)
â”œâ”€â”€ include/                  # å¤´æ–‡ä»¶
â”‚   â”œâ”€â”€ rapidjson/           # RapidJSONåº“ (å·²æ†ç»‘)
â”‚   â””â”€â”€ open-trade-common/   # é¡¹ç›®ä¾èµ–å¤´æ–‡ä»¶ (å·²æ†ç»‘)
â”œâ”€â”€ libs/                     # CTPåº“æ–‡ä»¶ (å·²æ†ç»‘)
â”œâ”€â”€ config/                   # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ multi_ctp_config.json # 90ä¸ªæœŸè´§å…¬å¸é…ç½®
â”œâ”€â”€ bin/                      # å¯æ‰§è¡Œæ–‡ä»¶
â”‚   â””â”€â”€ market_data_server   # ç¼–è¯‘å®Œæˆçš„æœåŠ¡å™¨
â”œâ”€â”€ Dockerfile               # Dockeræ„å»ºæ–‡ä»¶
â”œâ”€â”€ docker-compose.yml       # Docker Composeé…ç½®
â”œâ”€â”€ docker-build.sh          # Dockeræ„å»ºè„šæœ¬
â”œâ”€â”€ DEPLOYMENT.md            # å®Œæ•´éƒ¨ç½²æŒ‡å—
â””â”€â”€ Makefile                 # ç‹¬ç«‹ç¼–è¯‘é…ç½®
```

### ğŸ”¨ éªŒè¯ç»“æœ

```bash
# ä¾èµ–æ£€æŸ¥
âœ… RapidJSON: å·²æ†ç»‘
âœ… open-trade-common: å·²æ†ç»‘  
âœ… CTPåº“: å·²æ†ç»‘

# ç¼–è¯‘æµ‹è¯•
make clean && make all
âœ… ç¼–è¯‘æˆåŠŸ: bin/market_data_server (31MB)

# åŠŸèƒ½éªŒè¯
./bin/market_data_server --help
âœ… æ˜¾ç¤ºå®Œæ•´ä½¿ç”¨å¸®åŠ©
âœ… æ”¯æŒå•CTPå’Œå¤šCTPæ¨¡å¼
```

### ğŸš€ å¿«é€Ÿå¯åŠ¨

```bash
# æœ¬åœ°ç¼–è¯‘è¿è¡Œ
make clean && make all
./bin/market_data_server --multi-ctp

# Dockeréƒ¨ç½² (éœ€è¦Dockerç¯å¢ƒ)
./docker-build.sh
docker-compose up -d
```

### ğŸ“‹ æŠ€æœ¯ç‰¹æ€§

- **ç¼–è¯‘å™¨æ”¯æŒ**: GCC 7.0+ (C++17)
- **æ“ä½œç³»ç»Ÿ**: Ubuntu 20.04+ / CentOS 7+
- **ç½‘ç»œåè®®**: WebSocket (ç«¯å£7799)
- **æ•°æ®å­˜å‚¨**: Redisé›†æˆ
- **å¹¶å‘å¤„ç†**: å¤šçº¿ç¨‹ + Boost.Asio
- **è´Ÿè½½å‡è¡¡**: 4ç§ç­–ç•¥ (è½®è¯¢/æœ€å°‘è¿æ¥/è¿æ¥è´¨é‡/å“ˆå¸Œ)
- **å®¹å™¨åŒ–**: Docker + Docker Compose

## ğŸ‰ ç»“è®º

é¡¹ç›®å·²å®Œå…¨è¾¾åˆ°ç‹¬ç«‹ç¼–è¯‘å’ŒDockeråŒ–éƒ¨ç½²çš„è¦æ±‚ï¼š

1. âœ… **æ‰€æœ‰libã€hppã€cppã€.soæ–‡ä»¶å·²æ±‡æ€»åˆ°qactpmdgateway**
2. âœ… **æˆåŠŸå®ç°ç‹¬ç«‹ç¼–è¯‘**
3. âœ… **å¢åŠ äº†åŸºäºUbuntu 20.04çš„Dockerfile**
4. âœ… **å®Œæ•´çš„éƒ¨ç½²å’Œè¿ç»´æ–‡æ¡£**

**é¡¹ç›®ç°åœ¨æ˜¯ä¸€ä¸ªå®Œå…¨ç‹¬ç«‹ã€å¯éƒ¨ç½²çš„å¤šCTPå¸‚åœºæ•°æ®ç½‘å…³ç³»ç»Ÿï¼**